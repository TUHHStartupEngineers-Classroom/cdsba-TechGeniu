---
title: "Difference-in-Differences"
author: "Sriramkumar Sarida"
---

# Study of New Admission procedure in hospitals

------------------------------------------------------------------------

## Load the data frame

```{r}
library(dplyr)
hospital_data  <- readRDS("../../data/hospdd.rds")
```

```{r}
head(hospital_data)
```

```{r}
summary(hospital_data)
```

```{r}
treatment_by_month <- hospital_data %>%
  group_by(month) %>%
  summarise(treatment_count = sum(procedure))

# Display the count of treatments by month
print(treatment_by_month)

```

-   The exact period when the treatment came into effect is not explicitly shown in the question. To make a better estimate, the data was filtered based on the months to find the sum of the treatment values. So this calculation provides a hint when the new admission procedure was introduced. The treatment came into effect from month 4.


```{r}
treatment_month = 4

mean_control_before <- hospital_data %>%
  filter(procedure == 0, month == treatment_month - 1) %>%
  summarize(mean_satisfaction = mean(satis)) %>%
  pull(mean_satisfaction)

mean_treated_before <- hospital_data %>%
  filter(procedure == 1, month == treatment_month - 1) %>%
  summarize(mean_satisfaction = mean(satis)) %>%
  pull(mean_satisfaction)


diff_before_treatment = mean_treated_before - mean_control_before

diff_before_treatment


mean_control_after <- hospital_data %>%
  filter(procedure == 0, month == treatment_month) %>%
  summarize(mean_satisfaction = mean(satis)) %>%
  pull(mean_satisfaction)

mean_treated_after <- hospital_data %>%
  filter(procedure == 1, month == treatment_month) %>%
  summarize(mean_satisfaction = mean(satis)) %>%
  pull(mean_satisfaction)

diff_after_treatment = mean_treated_after - mean_control_after

diff_after_treatment

```


```{r}
hospital_data %>%
  filter(procedure == 1, month < treatment_month) %>%
  summarise(n = n())
```


```{r}
did_estimate <- diff_after_treatment - diff_before_treatment

did_estimate
```



