[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "My Lab Journal",
    "section": "",
    "text": "This is a template example for lab journaling. Students in the data science courses at the Institute of Entrepreneurship will use this template to learn R for business analytics. Students can replace this text as they wish."
  },
  {
    "objectID": "index.html#how-to-use",
    "href": "index.html#how-to-use",
    "title": "My Lab Journal",
    "section": "How to use",
    "text": "How to use\n\nAccept the assignment and get your own github repo.\nBlog/journal what you are doing in R, by editing the .qmd files.\nSee the links page for lots of helpful links on learning R.\nChange everything to make it your own.\nMake sure to render you website every time before you want to upload changes."
  },
  {
    "objectID": "content/01_journal/02_statistics.html",
    "href": "content/01_journal/02_statistics.html",
    "title": "Statistical Concepts",
    "section": "",
    "text": "Load the data variable:\n\n\nrandom_vars &lt;- readRDS(\"../../data/random_vars.rds\")\n\nView(random_vars)\n\nrandom_vars\n\n\n\n  \n\n\n\n\n1 Question 1\n\nFor each variable, compute the following values. You can use the built-in functions or use the mathematical formulas.\n- expected value, variance, standard deviation\n\ncomputing the mean, variance and standard deviation\n\n\n# for Age\nexpected_value_age &lt;- mean(random_vars$age)\nvariance_age &lt;- var(random_vars$age)\nstandard_deviation_age &lt;- sd(random_vars$age)\n\n# for Income\nexpected_value_income &lt;- mean(random_vars$income)\nvariance_income &lt;- var(random_vars$income)\nstandard_deviation_income &lt;- sd(random_vars$income)\n\n\nPrinting mean, variance, standard deviation for age\n\n\ncat(\"# Expected Value:  =\", expected_value_age)\n\n#&gt; # Expected Value:  = 33.471\n\ncat(\"# Variance Value:  =\", variance_age)\n\n#&gt; # Variance Value:  = 340.6078\n\ncat(\"# Standard Deviation Value:  =\", standard_deviation_age)\n\n#&gt; # Standard Deviation Value:  = 18.45556\n\n\n\nPrinting mean, variance, standard deviation for Income\n\n\ncat(\"# Expected Value:  =\", expected_value_income)\n\n#&gt; # Expected Value:  = 3510.731\n\ncat(\"# Variance Value:  =\", variance_income)\n\n#&gt; # Variance Value:  = 8625646\n\ncat(\"# Standard Deviation Value:  =\", standard_deviation_income)\n\n#&gt; # Standard Deviation Value:  = 2936.945\n\n\n\n\n2 Question 2\n\nThe standard deviations cannot be for atleast the provided dataset. The reason being, the variables assessed are age and income, which are measured in two different units and completely different scales. Therefore, it would not be ideal to compare these standard deviations.\nThe figures below are the plots of the Standard deviation of both Age and Income. We can see the scales and the distribution are completely different.\n\nlibrary(ggplot2)\nggplot(random_vars, aes(x = age)) +\n  geom_histogram(binwidth = 1, fill = 'blue', alpha = 0.7) +\n  geom_vline(aes(xintercept = expected_value_age), color = \"red\", linetype = \"dashed\", size = 1) +\n  geom_vline(aes(xintercept = expected_value_age + standard_deviation_age), color = \"red\", size = 1) +\n  geom_vline(aes(xintercept = expected_value_age - standard_deviation_age), color = \"red\", size = 1) +\n  ggtitle(\"Distribution of Age with Standard Deviation\")\n\n#&gt; Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\n#&gt; ℹ Please use `linewidth` instead.\n\n\n\n\n\n\n\n\n# Plot for 'income'\nggplot(random_vars, aes(x = income)) +\n  geom_histogram(binwidth = 100, fill = 'green', alpha = 0.7) +\n  geom_vline(aes(xintercept = expected_value_income), color = \"blue\", linetype = \"dashed\", size = 1) +\n  geom_vline(aes(xintercept = expected_value_income + standard_deviation_income), color = \"blue\", size = 1) +\n  geom_vline(aes(xintercept = expected_value_income - standard_deviation_income), color = \"blue\", size = 1) +\n  ggtitle(\"Distribution of Income with Standard Deviation\")\n\n\n\n\n\n\n\n\n\n\n3 Question 3\nThen, examine the relationship between both variables and compute:\n- covariance, correlation\n\n#Calculating Covariance and Correlation\ncovariance &lt;- cov(random_vars$age, random_vars$income)\ncorrelation &lt;- cor(random_vars$age, random_vars$income)\n\n\nPrinting covariance and correlation\n\n\ncat(\"# Covariance:  =\", covariance)\n\n#&gt; # Covariance:  = 29700.15\n\ncat(\"# Correlation:  =\", correlation)\n\n#&gt; # Correlation:  = 0.5479432\n\n\n\n\n4 Question 4\n\nCorrelation is a relatively easier measure to interpret. It is dimensionless and can provide information on the strength of the relationship between two variables, which makes it a perfect measure to compare Age and Income when these variables are fundamentally on two different scales. It is standardized to a range of -1 to 1, where the sign indicates the direction of the relationship, and the magnitude indicates the strength.\nAs the age increases, the income tends to increase as well, roughly accounting for 54.8%. This does not imply causation but there is a tendency for income to rise as the age rises.\nOn the other hand, Covariance is 29700.15. This value does not seem to be sensible between age and income. These variables have two different scales, which directly have an effect on the value of the Covariance.\n\n\n5 Question 5\n\nCompute the conditional expected value for:\n- E[income|age &lt;= 18]\n- E[income|age ∈ [18, 65]]\n- E[income|age &gt;= 65]\n\nexpected_value_teens &lt;- mean(random_vars$income[random_vars$age &lt;= 18])\nexpected_value_adults &lt;- mean(random_vars$income[random_vars$age &gt; 18 & random_vars$age &lt;= 65])\nexpected_value_seniors &lt;- mean(random_vars$income[random_vars$age &gt; 65])\n\n\nPrinting covariance and correlation\n\n\ncat(\"# E[income|age &lt;= 18]:  =\", expected_value_teens)\n\n#&gt; # E[income|age &lt;= 18]:  = 389.6074\n\ncat(\"# E[income|age ∈ [18, 65]]:  =\", expected_value_adults)\n\n#&gt; # E[income|age ∈ [18, 65]]:  = 4743.234\n\ncat(\"# E[income|age &gt;= 65]:  =\", expected_value_seniors)\n\n#&gt; # E[income|age &gt;= 65]:  = 1604.193"
  },
  {
    "objectID": "content/01_journal/04_causality.html",
    "href": "content/01_journal/04_causality.html",
    "title": "Causality",
    "section": "",
    "text": "1 Famous example: Nicolas Cage films and number of poeple drowned by falling into a pool\n\nI came across this awful example of the number of people drowned by falling into a pool correlated with films Nicolas Cage appeared in during the same time period. I would like to recreate this example: https://www.datasciencecentral.com/wp-content/uploads/2021/10/2808309983.png\n\nset.seed(99)\nyears &lt;- 2000:2009\ncage_films &lt;- cumsum(sample(1:5, 10, replace = TRUE))\ndrownings &lt;- cumsum(sample(1:5, 10, replace = TRUE)) + rnorm(10, mean = 0, sd = 0.15)\ndata &lt;- data.frame(Year = years, Cage_Films = cage_films, Drownings = drownings)\n\n\ndata\n\n\n\n  \n\n\n\n\nlibrary(ggplot2)\n\nggplot(data, aes(x = Year)) + \n  geom_line(aes(y = Cage_Films, colour = \"Nicolas Cage Films\")) +\n  geom_line(aes(y = Drownings, colour = \"Drownings by falling into the pool\")) +\n  labs(title = \"Spurious Correlation between Nicolas Cage Films and Drownings\",\n       y = \"Count\",\n       colour = \"Legend\") +\n  theme_minimal()\n\n\n\n\n\n\n\nggplot(data, aes(x = Cage_Films, y = Drownings)) +\n  geom_point() +\n  labs(title = \"Scatter Plot of Nicolas Cage Films vs Drownings\",\n       x = \"Nicolas Cage Films\",\n       y = \"Drownings by falling into the pool\") +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\nThe Line plot shows the the trend of number of films Nicolas Cage featured in over time and the number of drownings by falling into the pool. When I was generating random data for the drownings, I thought it made sense to add noise to the dataset.\nThe second plot shows the scatter plot showing this awful correlation."
  },
  {
    "objectID": "content/01_journal/09_iv.html",
    "href": "content/01_journal/09_iv.html",
    "title": "Instrumental Variables",
    "section": "",
    "text": "Note\n\n\n\nYou can delete everything in here and start fresh."
  },
  {
    "objectID": "content/01_journal/07_matching.html",
    "href": "content/01_journal/07_matching.html",
    "title": "Matching and Subclassification",
    "section": "",
    "text": "membership  &lt;- readRDS(\"../../data/membership.rds\")\n\n\nhead(membership)\n\n\n\n  \n\n\n\n\n\n\n\n# Assuming you have the ggdag package installed\nlibrary(ggdag)\nlibrary(ggplot2)\n\n# Define the DAG\ndag &lt;- dagify(\n  X ~ Z,\n  Y ~ Z,\n  Y ~ X,\n  coords = list(x = c(Y = 3, Z = 2, X = 1),\n                y = c(Y = 0, Z = 1, X = 0)),\n  labels = list(X = \"card\",\n                Y = \"avg_purch\",\n                Z = \"pre_avg_purch\")\n)\n\nggdag(dag) +\n  theme_dag() + \n  geom_dag_point() +\n  geom_dag_text() +\n  geom_dag_edges() +\n  geom_dag_label_repel(aes(label = label))\n\n\n\n\n\n\n\n\n\n\n\n\nnaive_model &lt;- lm(avg_purch ~ card + age + sex + pre_avg_purch, data = membership)\nsummary(naive_model)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = avg_purch ~ card + age + sex + pre_avg_purch, data = membership)\n#&gt; \n#&gt; Residuals:\n#&gt;     Min      1Q  Median      3Q     Max \n#&gt; -54.184 -10.206   0.022  10.003  62.115 \n#&gt; \n#&gt; Coefficients:\n#&gt;                Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)   -0.173970   0.542953  -0.320    0.749    \n#&gt; card          14.910946   0.314135  47.467   &lt;2e-16 ***\n#&gt; age            0.014427   0.013222   1.091    0.275    \n#&gt; sex            0.076991   0.304649   0.253    0.800    \n#&gt; pre_avg_purch  0.991921   0.006784 146.213   &lt;2e-16 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 15.23 on 9995 degrees of freedom\n#&gt; Multiple R-squared:  0.7817, Adjusted R-squared:  0.7816 \n#&gt; F-statistic:  8948 on 4 and 9995 DF,  p-value: &lt; 2.2e-16\n\n\n\n\n\n\nlibrary(MatchIt)\nmatch_cem &lt;- matchit(card ~ sex + age + pre_avg_purch, data = membership, method = \"cem\")\nsummary(match_cem)\n\n#&gt; \n#&gt; Call:\n#&gt; matchit(formula = card ~ sex + age + pre_avg_purch, data = membership, \n#&gt;     method = \"cem\")\n#&gt; \n#&gt; Summary of Balance for All Data:\n#&gt;               Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean\n#&gt; sex                  0.5087        0.5002          0.0171          .    0.0086\n#&gt; age                 42.0331       39.1574          0.2064     1.1524    0.0438\n#&gt; pre_avg_purch       76.3938       66.0438          0.3936     1.0276    0.1092\n#&gt;               eCDF Max\n#&gt; sex             0.0086\n#&gt; age             0.0864\n#&gt; pre_avg_purch   0.1545\n#&gt; \n#&gt; Summary of Balance for Matched Data:\n#&gt;               Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean\n#&gt; sex                  0.5070        0.5070          0.0000          .    0.0000\n#&gt; age                 41.6786       41.6527          0.0019     0.9995    0.0016\n#&gt; pre_avg_purch       75.7076       75.3560          0.0134     0.9951    0.0042\n#&gt;               eCDF Max Std. Pair Dist.\n#&gt; sex             0.0000          0.0000\n#&gt; age             0.0070          0.1181\n#&gt; pre_avg_purch   0.0128          0.1547\n#&gt; \n#&gt; Sample Sizes:\n#&gt;               Control Treated\n#&gt; All            5768.     4232\n#&gt; Matched (ESS)  4407.4    4164\n#&gt; Matched        5716.     4164\n#&gt; Unmatched        52.       68\n#&gt; Discarded         0.        0\n\ndata_cem &lt;- match.data(match_cem)\nsummary(data_cem)\n\n#&gt;       age             sex        pre_avg_purch          card       \n#&gt;  Min.   :16.00   Min.   :0.000   Min.   : -1.791   Min.   :0.0000  \n#&gt;  1st Qu.:29.80   1st Qu.:0.000   1st Qu.: 51.859   1st Qu.:0.0000  \n#&gt;  Median :38.60   Median :1.000   Median : 69.983   Median :0.0000  \n#&gt;  Mean   :40.17   Mean   :0.504   Mean   : 70.242   Mean   :0.4215  \n#&gt;  3rd Qu.:48.90   3rd Qu.:1.000   3rd Qu.: 88.375   3rd Qu.:1.0000  \n#&gt;  Max.   :84.60   Max.   :1.000   Max.   :153.713   Max.   :1.0000  \n#&gt;                                                                    \n#&gt;    avg_purch         weights           subclass   \n#&gt;  Min.   :-28.61   Min.   : 0.1615   5      : 148  \n#&gt;  1st Qu.: 54.08   1st Qu.: 0.8527   94     : 142  \n#&gt;  Median : 76.11   Median : 1.0000   4      : 141  \n#&gt;  Mean   : 76.39   Mean   : 1.0000   80     : 140  \n#&gt;  3rd Qu.: 98.06   3rd Qu.: 1.0000   54     : 136  \n#&gt;  Max.   :192.91   Max.   :10.9817   29     : 135  \n#&gt;                                     (Other):9038\n\nmodel_cem &lt;- lm(avg_purch ~ card, data = data_cem)\nsummary(model_cem)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = avg_purch ~ card, data = data_cem)\n#&gt; \n#&gt; Residuals:\n#&gt;      Min       1Q   Median       3Q      Max \n#&gt; -100.835  -20.456   -0.178   20.041  119.973 \n#&gt; \n#&gt; Coefficients:\n#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)  66.1326     0.3934  168.11   &lt;2e-16 ***\n#&gt; card         24.3461     0.6060   40.18   &lt;2e-16 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 29.74 on 9878 degrees of freedom\n#&gt; Multiple R-squared:  0.1405, Adjusted R-squared:  0.1404 \n#&gt; F-statistic:  1614 on 1 and 9878 DF,  p-value: &lt; 2.2e-16\n\n\n\n\n\n\nlibrary(MatchIt)\ncutpoints &lt;- list(age = seq(16, 85, 10), \n                  pre_avg_purch = seq(0, 160, 20))\nmatch_cem &lt;- matchit(card ~ sex + age + pre_avg_purch, data = membership, method = \"cem\", cutpoints = cutpoints)\nsummary(match_cem)\n\n#&gt; \n#&gt; Call:\n#&gt; matchit(formula = card ~ sex + age + pre_avg_purch, data = membership, \n#&gt;     method = \"cem\", cutpoints = cutpoints)\n#&gt; \n#&gt; Summary of Balance for All Data:\n#&gt;               Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean\n#&gt; sex                  0.5087        0.5002          0.0171          .    0.0086\n#&gt; age                 42.0331       39.1574          0.2064     1.1524    0.0438\n#&gt; pre_avg_purch       76.3938       66.0438          0.3936     1.0276    0.1092\n#&gt;               eCDF Max\n#&gt; sex             0.0086\n#&gt; age             0.0864\n#&gt; pre_avg_purch   0.1545\n#&gt; \n#&gt; Summary of Balance for Matched Data:\n#&gt;               Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean\n#&gt; sex                  0.5095        0.5095          0.0000          .    0.0000\n#&gt; age                 41.9593       41.8825          0.0055     1.0203    0.0024\n#&gt; pre_avg_purch       76.1990       75.5617          0.0242     1.0038    0.0064\n#&gt;               eCDF Max Std. Pair Dist.\n#&gt; sex             0.0000          0.0000\n#&gt; age             0.0092          0.2317\n#&gt; pre_avg_purch   0.0185          0.2486\n#&gt; \n#&gt; Sample Sizes:\n#&gt;               Control Treated\n#&gt; All           5768.      4232\n#&gt; Matched (ESS) 4704.04    4214\n#&gt; Matched       5750.      4214\n#&gt; Unmatched       18.        18\n#&gt; Discarded        0.         0\n\ndata_cem &lt;- match.data(match_cem)\nsummary(data_cem)\n\n#&gt;       age             sex         pre_avg_purch           card       \n#&gt;  Min.   :16.00   Min.   :0.0000   Min.   :  0.3307   Min.   :0.0000  \n#&gt;  1st Qu.:29.80   1st Qu.:0.0000   1st Qu.: 51.8799   1st Qu.:0.0000  \n#&gt;  Median :38.70   Median :1.0000   Median : 70.1684   Median :0.0000  \n#&gt;  Mean   :40.34   Mean   :0.5036   Mean   : 70.4465   Mean   :0.4229  \n#&gt;  3rd Qu.:49.10   3rd Qu.:1.0000   3rd Qu.: 88.6960   3rd Qu.:1.0000  \n#&gt;  Max.   :90.00   Max.   :1.0000   Max.   :158.5457   Max.   :1.0000  \n#&gt;                                                                      \n#&gt;    avg_purch         weights          subclass   \n#&gt;  Min.   :-28.61   Min.   :0.1516   9      : 422  \n#&gt;  1st Qu.: 54.11   1st Qu.:0.8676   2      : 419  \n#&gt;  Median : 76.27   Median :1.0000   1      : 415  \n#&gt;  Mean   : 76.64   Mean   :1.0000   4      : 407  \n#&gt;  3rd Qu.: 98.47   3rd Qu.:1.0000   32     : 405  \n#&gt;  Max.   :192.91   Max.   :6.1402   45     : 392  \n#&gt;                                    (Other):7504\n\nmodel_cem &lt;- lm(avg_purch ~ card, data = data_cem)\nsummary(model_cem)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = avg_purch ~ card, data = data_cem)\n#&gt; \n#&gt; Residuals:\n#&gt;      Min       1Q   Median       3Q      Max \n#&gt; -101.330  -20.623   -0.241   20.317  119.975 \n#&gt; \n#&gt; Coefficients:\n#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)  66.1307     0.3946  167.58   &lt;2e-16 ***\n#&gt; card         24.8434     0.6068   40.94   &lt;2e-16 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 29.92 on 9962 degrees of freedom\n#&gt; Multiple R-squared:  0.144,  Adjusted R-squared:  0.1439 \n#&gt; F-statistic:  1676 on 1 and 9962 DF,  p-value: &lt; 2.2e-16\n\n\n\nAdding cutpoints, did not seem to make much difference to the balance between the treatment and the control group indicating the treatment effect between the treatment and the control group. But this could also be due the the selection of the cutpoints. In this case, it was chosen to be age and pre_avg_purch might not have strong impact on the membership program.\n\n\n\n\n\nmatch_nn &lt;- matchit(card ~ age + sex + pre_avg_purch, data = membership, method = \"nearest\", distance = \"mahalanobis\", replace = T)\nsummary(match_nn)\n\n#&gt; \n#&gt; Call:\n#&gt; matchit(formula = card ~ age + sex + pre_avg_purch, data = membership, \n#&gt;     method = \"nearest\", distance = \"mahalanobis\", replace = T)\n#&gt; \n#&gt; Summary of Balance for All Data:\n#&gt;               Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean\n#&gt; age                 42.0331       39.1574          0.2064     1.1524    0.0438\n#&gt; sex                  0.5087        0.5002          0.0171          .    0.0086\n#&gt; pre_avg_purch       76.3938       66.0438          0.3936     1.0276    0.1092\n#&gt;               eCDF Max\n#&gt; age             0.0864\n#&gt; sex             0.0086\n#&gt; pre_avg_purch   0.1545\n#&gt; \n#&gt; Summary of Balance for Matched Data:\n#&gt;               Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean\n#&gt; age                 42.0331       41.9964          0.0026     1.0171    0.0014\n#&gt; sex                  0.5087        0.5087          0.0000          .    0.0000\n#&gt; pre_avg_purch       76.3938       76.2937          0.0038     1.0178    0.0012\n#&gt;               eCDF Max Std. Pair Dist.\n#&gt; age             0.0061          0.0281\n#&gt; sex             0.0000          0.0000\n#&gt; pre_avg_purch   0.0076          0.0301\n#&gt; \n#&gt; Sample Sizes:\n#&gt;               Control Treated\n#&gt; All           5768.      4232\n#&gt; Matched (ESS) 1992.19    4232\n#&gt; Matched       2677.      4232\n#&gt; Unmatched     3091.         0\n#&gt; Discarded        0.         0\n\ndata_nn &lt;- match.data(match_nn)\nsummary(data_nn)\n\n#&gt;       age             sex         pre_avg_purch          card       \n#&gt;  Min.   :16.20   Min.   :0.0000   Min.   : -3.966   Min.   :0.0000  \n#&gt;  1st Qu.:30.80   1st Qu.:0.0000   1st Qu.: 56.368   1st Qu.:0.0000  \n#&gt;  Median :39.90   Median :1.0000   Median : 74.441   Median :1.0000  \n#&gt;  Mean   :41.51   Mean   :0.5086   Mean   : 74.705   Mean   :0.6125  \n#&gt;  3rd Qu.:50.60   3rd Qu.:1.0000   3rd Qu.: 92.900   3rd Qu.:1.0000  \n#&gt;  Max.   :90.00   Max.   :1.0000   Max.   :169.416   Max.   :1.0000  \n#&gt;    avg_purch         weights      \n#&gt;  Min.   :-23.40   Min.   :0.6326  \n#&gt;  1st Qu.: 62.22   1st Qu.:1.0000  \n#&gt;  Median : 83.73   Median :1.0000  \n#&gt;  Mean   : 83.79   Mean   :1.0000  \n#&gt;  3rd Qu.:105.06   3rd Qu.:1.0000  \n#&gt;  Max.   :192.91   Max.   :5.0605\n\nmodel_nn &lt;- lm(avg_purch ~ card, data = data_nn)\nsummary(model_nn)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = avg_purch ~ card, data = data_nn)\n#&gt; \n#&gt; Residuals:\n#&gt;      Min       1Q   Median       3Q      Max \n#&gt; -101.515  -20.666   -0.065   20.493  113.958 \n#&gt; \n#&gt; Coefficients:\n#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)  72.1472     0.5807  124.24   &lt;2e-16 ***\n#&gt; card         19.0120     0.7420   25.62   &lt;2e-16 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 30.05 on 6907 degrees of freedom\n#&gt; Multiple R-squared:  0.0868, Adjusted R-squared:  0.08667 \n#&gt; F-statistic: 656.5 on 1 and 6907 DF,  p-value: &lt; 2.2e-16\n\n\n\n\n\n\npropensity_model &lt;- glm(card ~ age + sex + pre_avg_purch, family = binomial(link = \"logit\"), data = membership)\nsummary(propensity_model)\n\n#&gt; \n#&gt; Call:\n#&gt; glm(formula = card ~ age + sex + pre_avg_purch, family = binomial(link = \"logit\"), \n#&gt;     data = membership)\n#&gt; \n#&gt; Coefficients:\n#&gt;                 Estimate Std. Error z value Pr(&gt;|z|)    \n#&gt; (Intercept)   -1.4298676  0.0752043 -19.013   &lt;2e-16 ***\n#&gt; age            0.0011486  0.0017761   0.647    0.518    \n#&gt; sex            0.0359388  0.0412622   0.871    0.384    \n#&gt; pre_avg_purch  0.0148262  0.0009264  16.003   &lt;2e-16 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; (Dispersion parameter for binomial family taken to be 1)\n#&gt; \n#&gt;     Null deviance: 13626  on 9999  degrees of freedom\n#&gt; Residual deviance: 13249  on 9996  degrees of freedom\n#&gt; AIC: 13257\n#&gt; \n#&gt; Number of Fisher Scoring iterations: 4\n\nmembership$propensity &lt;- predict(propensity_model, type = \"response\")\nsummary(membership$propensity)\n\n#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n#&gt;  0.1705  0.3534  0.4192  0.4232  0.4886  0.7695\n\nmembership$ipw &lt;- with(membership, (card / propensity) + ((1 - card) / (1 - propensity)))\nsummary(membership$ipw)\n\n#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n#&gt;   1.206   1.611   1.871   2.000   2.256   5.308\n\nmodel_ipw &lt;- lm(avg_purch ~ card, data = membership, weights = ipw)\nsummary(model_ipw)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = avg_purch ~ card, data = membership, weights = ipw)\n#&gt; \n#&gt; Weighted Residuals:\n#&gt;      Min       1Q   Median       3Q      Max \n#&gt; -205.353  -28.995   -0.275   28.787  214.307 \n#&gt; \n#&gt; Coefficients:\n#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)  70.2628     0.4320  162.66   &lt;2e-16 ***\n#&gt; card         14.9573     0.6109   24.48   &lt;2e-16 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 43.19 on 9998 degrees of freedom\n#&gt; Multiple R-squared:  0.05657,    Adjusted R-squared:  0.05647 \n#&gt; F-statistic: 599.5 on 1 and 9998 DF,  p-value: &lt; 2.2e-16"
  },
  {
    "objectID": "content/01_journal/05_dag.html",
    "href": "content/01_journal/05_dag.html",
    "title": "Directed Acyclic Graphs",
    "section": "",
    "text": "This seems to be similar to the Confounding DAG explained in the theory. The parking spots seems to be the treatment variable and store sales would be the outcome variable. The confounding variable would be the location, as it makes a difference to the store sales if the location of the store is the city center or in the Urban areas.\n\n\n# Assuming you have the ggdag package installed\nlibrary(ggdag)\n\n# Define the DAG\ndag &lt;- dagify(\n  X ~ Z,\n  Y ~ Z,\n  X ~ Y,\n  coords = list(x = c(Y = 3, Z = 2, X = 1),\n                y = c(Y = 0, Z = 1, X = 0)),\n  labels = list(X = \"Sales\",\n                Y = \"Parking_Spots\",\n                Z = \"Location\")\n)\n\nggdag(dag) +\n  theme_dag() + \n  geom_dag_point() +\n  geom_dag_text() +\n  geom_dag_edges() +\n  geom_dag_label_repel(aes(label = label))"
  },
  {
    "objectID": "content/01_journal/06_rct.html",
    "href": "content/01_journal/06_rct.html",
    "title": "Randomized Controlled Trials",
    "section": "",
    "text": "abtest_data  &lt;- readRDS(\"../../data/abtest_online.rds\")\n\n\nhead(abtest_data)\n\n\n\n  \n\n\n\n\nPlotting the abtest data to check the balance\n\n\nlibrary(ggplot2)\n\ncompare_purchase &lt;- \n  ggplot(abtest_data, aes(x = as.factor(chatbot), y = purchase, color = as.factor(chatbot))) +\n  stat_summary(geom = \"errorbar\", \n               width = .5,\n               fun.data = \"mean_se\", \n               fun.args = list(mult=1.96),\n               show.legend = FALSE) +\n  labs(x = NULL, y = \"Purchase\", title = \"Difference in purchase\")\n\n\ncompare_purchase_amount &lt;- \n  ggplot(abtest_data, aes(x = as.factor(chatbot), y = purchase_amount, color = as.factor(chatbot))) +\n  stat_summary(geom = \"errorbar\", \n               width = .5,\n               fun.data = \"mean_se\", \n               fun.args = list(mult=1.96),\n               show.legend = FALSE) +\n  labs(x = NULL, y = \"Purchase Amount\", title = \"Difference in purchase amount\")\n\n\nPlot for purchase\n\n\ncompare_purchase\n\n\n\n\n\n\n\n\n\nPlot for purchase amount\n\n\ncompare_purchase_amount\n\n\n\n\n\n\n\n\n\n\n\n\nlm_fit &lt;- lm(purchase_amount ~ chatbot + previous_visit + mobile_device, data=abtest_data)\nsummary(lm_fit)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = purchase_amount ~ chatbot + previous_visit + mobile_device, \n#&gt;     data = abtest_data)\n#&gt; \n#&gt; Residuals:\n#&gt;     Min      1Q  Median      3Q     Max \n#&gt; -25.414 -14.428  -8.435  12.559  64.584 \n#&gt; \n#&gt; Coefficients:\n#&gt;                   Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)        15.2840     1.1227  13.614  &lt; 2e-16 ***\n#&gt; chatbotTRUE        -6.8488     1.1792  -5.808 8.49e-09 ***\n#&gt; previous_visit      0.7792     0.2869   2.716  0.00673 ** \n#&gt; mobile_deviceTRUE  -0.8562     1.2642  -0.677  0.49841    \n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 18.6 on 996 degrees of freedom\n#&gt; Multiple R-squared:  0.04243,    Adjusted R-squared:  0.03954 \n#&gt; F-statistic: 14.71 on 3 and 996 DF,  p-value: 2.228e-09\n\n\n\nThe chatbot variable seems to be having a negative impact on purchase amount with an estimate of -6.8488. This implies that the chatbot presence has decreased the sales and thereby reducing the purchase amount.\n\n\n\n\n\nlm_cate &lt;- lm(purchase_amount ~ chatbot * mobile_device + previous_visit, data=abtest_data)\nsummary(lm_cate)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = purchase_amount ~ chatbot * mobile_device + previous_visit, \n#&gt;     data = abtest_data)\n#&gt; \n#&gt; Residuals:\n#&gt;     Min      1Q  Median      3Q     Max \n#&gt; -25.403 -14.450  -8.445  12.549  64.562 \n#&gt; \n#&gt; Coefficients:\n#&gt;                               Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)                   15.27384    1.19130  12.821  &lt; 2e-16 ***\n#&gt; chatbotTRUE                   -6.82837    1.42580  -4.789 1.93e-06 ***\n#&gt; mobile_deviceTRUE             -0.82375    1.79309  -0.459  0.64605    \n#&gt; previous_visit                 0.77914    0.28711   2.714  0.00677 ** \n#&gt; chatbotTRUE:mobile_deviceTRUE -0.06455    2.52907  -0.026  0.97964    \n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 18.6 on 995 degrees of freedom\n#&gt; Multiple R-squared:  0.04243,    Adjusted R-squared:  0.03858 \n#&gt; F-statistic: 11.02 on 4 and 995 DF,  p-value: 9.485e-09\n\n\n\n\n\n\nglm_fit &lt;- glm(purchase ~ chatbot + previous_visit + mobile_device, family=binomial, data=abtest_data)\nsummary(glm_fit)\n\n#&gt; \n#&gt; Call:\n#&gt; glm(formula = purchase ~ chatbot + previous_visit + mobile_device, \n#&gt;     family = binomial, data = abtest_data)\n#&gt; \n#&gt; Coefficients:\n#&gt;                   Estimate Std. Error z value Pr(&gt;|z|)    \n#&gt; (Intercept)       -0.22185    0.12347  -1.797  0.07237 .  \n#&gt; chatbotTRUE       -0.96894    0.13564  -7.144 9.09e-13 ***\n#&gt; previous_visit     0.10606    0.03262   3.252  0.00115 ** \n#&gt; mobile_deviceTRUE -0.07119    0.14530  -0.490  0.62417    \n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; (Dispersion parameter for binomial family taken to be 1)\n#&gt; \n#&gt;     Null deviance: 1329.1  on 999  degrees of freedom\n#&gt; Residual deviance: 1262.2  on 996  degrees of freedom\n#&gt; AIC: 1270.2\n#&gt; \n#&gt; Number of Fisher Scoring iterations: 4\n\n\n\nThe estimated values from the logistic regression might not be as straightforward as linear regression, because the coefficients represent the change in logarithmic odds of the outcome for a unit change in the predictor variable."
  },
  {
    "objectID": "content/01_journal/08_did.html",
    "href": "content/01_journal/08_did.html",
    "title": "Difference-in-Differences",
    "section": "",
    "text": "Note\n\n\n\nYou can delete everything in here and start fresh."
  },
  {
    "objectID": "content/01_journal/01_probability.html",
    "href": "content/01_journal/01_probability.html",
    "title": "Probability Theory",
    "section": "",
    "text": "T - Being on time\nT_not - Not being on time\nS - Change in Scope\nS_not - No change in scope\n\nDefining the probabilities from the probability tree\n\n\nP_S &lt;- 0.3 \nP_S_not &lt;- 0.7  \nP_T_given_S &lt;- 0.2  \nP_T_given_S_not &lt;- 0.6  \n\nP(T ∩ S) - P_T_and_S\n(T ∩ ¬S) - P_T_and_S_not\nP(¬T ∩ S) - P_not_T_and_S\nP(¬T ∩ ¬S) - P_not_T_and_S_not\n\n# Compute the joint probabilities\nP_T_and_S &lt;- P_S * P_T_given_S  \nP_T_and_S_not &lt;- P_S_not * P_T_given_S_not  \nP_not_T_and_S &lt;- P_S * (1 - P_T_given_S)  \nP_not_T_and_S_not &lt;- P_S_not * (1 - P_T_given_S_not)  \n\n\nP_T_and_S  \n\n#&gt; [1] 0.06\n\nP_T_and_S_not  \n\n#&gt; [1] 0.42\n\nP_not_T_and_S  \n\n#&gt; [1] 0.24\n\nP_not_T_and_S_not  \n\n#&gt; [1] 0.28\n\n\n\nSum of all probabilities\n\n\nprobabilities_sum &lt;- P_T_and_S + P_T_and_S_not + P_not_T_and_S + P_not_T_and_S_not\n\n\nprobabilities_sum\n\n#&gt; [1] 1"
  },
  {
    "objectID": "content/01_journal/01_probability.html#header-2",
    "href": "content/01_journal/01_probability.html#header-2",
    "title": "Probability Theory",
    "section": "5.1 Header 2",
    "text": "5.1 Header 2\n\nHeader 3\n\nHeader 4\n\nHeader 5\n\nHeader 6"
  },
  {
    "objectID": "content/01_journal/03_regression.html",
    "href": "content/01_journal/03_regression.html",
    "title": "Regression and Statistical Inference",
    "section": "",
    "text": "1 Read the and check the dimensions\n\n\nLoad the data frame\n\n\ncar_prices &lt;- readRDS(\"../../data/car_prices.rds\")\n\n\ndimensions &lt;- dim(car_prices)\n\ncat(\"# Dimensions of the dataframe:  =\", dimensions)\n\n#&gt; # Dimensions of the dataframe:  = 181 22\n\n\n\n\n2 Use appropriate commands to get a more detailed look at the data\n\n\nsummary(car_prices)\n\n#&gt;   aspiration         doornumber          carbody           drivewheel       \n#&gt;  Length:181         Length:181         Length:181         Length:181        \n#&gt;  Class :character   Class :character   Class :character   Class :character  \n#&gt;  Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n#&gt;                                                                             \n#&gt;                                                                             \n#&gt;                                                                             \n#&gt;  enginelocation       wheelbase        carlength        carwidth    \n#&gt;  Length:181         Min.   : 86.60   Min.   :141.1   Min.   :60.30  \n#&gt;  Class :character   1st Qu.: 94.50   1st Qu.:166.3   1st Qu.:64.00  \n#&gt;  Mode  :character   Median : 96.50   Median :173.0   Median :65.40  \n#&gt;                     Mean   : 98.21   Mean   :173.3   Mean   :65.74  \n#&gt;                     3rd Qu.:100.40   3rd Qu.:180.2   3rd Qu.:66.50  \n#&gt;                     Max.   :120.90   Max.   :208.1   Max.   :72.30  \n#&gt;    carheight       curbweight    enginetype        cylindernumber    \n#&gt;  Min.   :47.80   Min.   :1488   Length:181         Length:181        \n#&gt;  1st Qu.:52.00   1st Qu.:2122   Class :character   Class :character  \n#&gt;  Median :53.70   Median :2410   Mode  :character   Mode  :character  \n#&gt;  Mean   :53.58   Mean   :2521                                        \n#&gt;  3rd Qu.:55.50   3rd Qu.:2910                                        \n#&gt;  Max.   :59.80   Max.   :4066                                        \n#&gt;    enginesize     fuelsystem          boreratio         stroke    \n#&gt;  Min.   : 61.0   Length:181         Min.   :2.540   Min.   :2.07  \n#&gt;  1st Qu.: 98.0   Class :character   1st Qu.:3.150   1st Qu.:3.08  \n#&gt;  Median :120.0   Mode  :character   Median :3.310   Median :3.23  \n#&gt;  Mean   :127.1                      Mean   :3.325   Mean   :3.23  \n#&gt;  3rd Qu.:141.0                      3rd Qu.:3.590   3rd Qu.:3.40  \n#&gt;  Max.   :326.0                      Max.   :3.940   Max.   :4.17  \n#&gt;  compressionratio   horsepower       peakrpm        citympg     \n#&gt;  Min.   : 7.000   Min.   : 48.0   Min.   :4200   Min.   :13.00  \n#&gt;  1st Qu.: 8.500   1st Qu.: 70.0   1st Qu.:4800   1st Qu.:19.00  \n#&gt;  Median : 9.000   Median : 95.0   Median :5200   Median :24.00  \n#&gt;  Mean   : 8.848   Mean   :106.2   Mean   :5182   Mean   :24.85  \n#&gt;  3rd Qu.: 9.400   3rd Qu.:116.0   3rd Qu.:5500   3rd Qu.:30.00  \n#&gt;  Max.   :11.500   Max.   :288.0   Max.   :6600   Max.   :49.00  \n#&gt;    highwaympg        price      \n#&gt;  Min.   :16.00   Min.   : 5118  \n#&gt;  1st Qu.:25.00   1st Qu.: 7609  \n#&gt;  Median :30.00   Median : 9980  \n#&gt;  Mean   :30.48   Mean   :12999  \n#&gt;  3rd Qu.:34.00   3rd Qu.:16430  \n#&gt;  Max.   :54.00   Max.   :45400\n\n# Seeing the datatypes of the dataframe\nstr(car_prices)\n\n#&gt; Classes 'tbl_df', 'tbl' and 'data.frame':    181 obs. of  22 variables:\n#&gt;  $ aspiration      : chr  \"std\" \"std\" \"std\" \"std\" ...\n#&gt;  $ doornumber      : chr  \"two\" \"two\" \"two\" \"four\" ...\n#&gt;  $ carbody         : chr  \"convertible\" \"convertible\" \"hatchback\" \"sedan\" ...\n#&gt;  $ drivewheel      : chr  \"rwd\" \"rwd\" \"rwd\" \"fwd\" ...\n#&gt;  $ enginelocation  : chr  \"front\" \"front\" \"front\" \"front\" ...\n#&gt;  $ wheelbase       : num  88.6 88.6 94.5 99.8 99.4 ...\n#&gt;  $ carlength       : num  169 169 171 177 177 ...\n#&gt;  $ carwidth        : num  64.1 64.1 65.5 66.2 66.4 66.3 71.4 71.4 71.4 67.9 ...\n#&gt;  $ carheight       : num  48.8 48.8 52.4 54.3 54.3 53.1 55.7 55.7 55.9 52 ...\n#&gt;  $ curbweight      : num  2548 2548 2823 2337 2824 ...\n#&gt;  $ enginetype      : chr  \"dohc\" \"dohc\" \"ohcv\" \"ohc\" ...\n#&gt;  $ cylindernumber  : chr  \"four\" \"four\" \"six\" \"four\" ...\n#&gt;  $ enginesize      : num  130 130 152 109 136 136 136 136 131 131 ...\n#&gt;  $ fuelsystem      : chr  \"mpfi\" \"mpfi\" \"mpfi\" \"mpfi\" ...\n#&gt;  $ boreratio       : num  3.47 3.47 2.68 3.19 3.19 3.19 3.19 3.19 3.13 3.13 ...\n#&gt;  $ stroke          : num  2.68 2.68 3.47 3.4 3.4 3.4 3.4 3.4 3.4 3.4 ...\n#&gt;  $ compressionratio: num  9 9 9 10 8 8.5 8.5 8.5 8.3 7 ...\n#&gt;  $ horsepower      : num  111 111 154 102 115 110 110 110 140 160 ...\n#&gt;  $ peakrpm         : num  5000 5000 5000 5500 5500 5500 5500 5500 5500 5500 ...\n#&gt;  $ citympg         : num  21 21 19 24 18 19 19 19 17 16 ...\n#&gt;  $ highwaympg      : num  27 27 26 30 22 25 25 25 20 22 ...\n#&gt;  $ price           : num  13495 16500 16500 13950 17450 ...\n\nhead(car_prices)\n\n\n\n  \n\n\n\nThe data types are as follows: chr and num.\nThe numeric data seems to be both decimal and whole numbers and they are classified under num. We can perform mathematical operations like summing, avergaing and so on.\nThe strings are referred as characters data type. Operations like sorting, categorizing can be performed with this data type.\n\n\n3 Run a linear regression. You want to explain what factors are relevant for the pricing of a car.\n\n\nlm_model &lt;- lm(price ~ ., data = car_prices)\n\nsummary(lm_model)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = price ~ ., data = car_prices)\n#&gt; \n#&gt; Residuals:\n#&gt;    Min     1Q Median     3Q    Max \n#&gt;  -5662  -1120      0    798   9040 \n#&gt; \n#&gt; Coefficients:\n#&gt;                        Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)          -36269.965  15460.866  -2.346 0.020354 *  \n#&gt; aspirationturbo        1846.206   1041.391   1.773 0.078386 .  \n#&gt; doornumbertwo           242.523    571.929   0.424 0.672172    \n#&gt; carbodyhardtop        -3691.743   1424.825  -2.591 0.010561 *  \n#&gt; carbodyhatchback      -3344.335   1238.359  -2.701 0.007757 ** \n#&gt; carbodysedan          -2292.820   1356.014  -1.691 0.093043 .  \n#&gt; carbodywagon          -3427.921   1490.285  -2.300 0.022885 *  \n#&gt; drivewheelfwd          -504.564   1076.623  -0.469 0.640030    \n#&gt; drivewheelrwd           -15.446   1268.070  -0.012 0.990299    \n#&gt; enginelocationrear     6643.492   2572.275   2.583 0.010806 *  \n#&gt; wheelbase               -30.197     92.776  -0.325 0.745294    \n#&gt; carlength               -29.740     51.672  -0.576 0.565824    \n#&gt; carwidth                731.819    244.533   2.993 0.003258 ** \n#&gt; carheight               123.195    134.607   0.915 0.361617    \n#&gt; curbweight                2.612      1.781   1.467 0.144706    \n#&gt; enginetypedohcv       -8541.957   4749.685  -1.798 0.074219 .  \n#&gt; enginetypel             978.748   1786.384   0.548 0.584619    \n#&gt; enginetypeohc          3345.252    933.001   3.585 0.000461 ***\n#&gt; enginetypeohcf          972.919   1625.631   0.598 0.550462    \n#&gt; enginetypeohcv        -6222.322   1236.415  -5.033 1.43e-06 ***\n#&gt; cylindernumberfive   -11724.540   3019.192  -3.883 0.000157 ***\n#&gt; cylindernumberfour   -11549.326   3177.177  -3.635 0.000387 ***\n#&gt; cylindernumbersix     -7151.398   2247.230  -3.182 0.001793 ** \n#&gt; cylindernumberthree   -4318.929   4688.833  -0.921 0.358545    \n#&gt; cylindernumbertwelve -11122.209   4196.494  -2.650 0.008946 ** \n#&gt; enginesize              125.934     26.541   4.745 5.00e-06 ***\n#&gt; fuelsystem2bbl          177.136    883.615   0.200 0.841400    \n#&gt; fuelsystemmfi         -3041.018   2576.996  -1.180 0.239934    \n#&gt; fuelsystemmpfi          359.278   1001.529   0.359 0.720326    \n#&gt; fuelsystemspdi        -2543.890   1363.546  -1.866 0.064140 .  \n#&gt; fuelsystemspfi          514.766   2499.229   0.206 0.837107    \n#&gt; boreratio             -1306.740   1642.221  -0.796 0.427516    \n#&gt; stroke                -4527.137    922.732  -4.906 2.49e-06 ***\n#&gt; compressionratio       -737.901    555.960  -1.327 0.186539    \n#&gt; horsepower               10.293     22.709   0.453 0.651035    \n#&gt; peakrpm                   2.526      0.634   3.983 0.000108 ***\n#&gt; citympg                 -90.352    166.647  -0.542 0.588538    \n#&gt; highwaympg              154.858    167.148   0.926 0.355761    \n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 2189 on 143 degrees of freedom\n#&gt; Multiple R-squared:  0.9415, Adjusted R-squared:  0.9264 \n#&gt; F-statistic: 62.21 on 37 and 143 DF,  p-value: &lt; 2.2e-16\n\n\nThe number of ‘*’ indicates how significant the parameters are that affect the price of the car. From the table above, we can conclude that these factors play a significant role towards the price of the car:\n\ncarbodyhardtop,\ncarbodyhatchback,\ncarbodywagon,\nenginelocationrear,\ncarwidth,\nenginetypeohc,\nenginetypeohcv,\ncylindernumberfive,\ncylindernumberfour,\ncylindernumbersix,\ncylindernumbertwelve,\nenginesize,\nstroke,\npeakrpm\n\n\nBoth the R values are quite high, greater than 0.92, indicating that the model is biased.\nAdditionally, the statistical significance for all the variables mentioned above are less than 0.05\n\n\n\n4 Choosing Regressor\n\nI would like to choose the Engine Size as the Regressor.\n\nData type: As we see from the summary of the linear regression, the data type of the Engine Size is num or a numeric value.\nStatistical Significance: The p-value is 5.00e-06. It seems to be significantly smaller than 0.05, indicating that the effect it has on the Price is quite high.\nEffect it has on Price: The coefficient of the Engine Size is 125.934. This value indicates that for each unit increase in size, the price is expected to increase by 125.934 units, keeping other variable constants.\n\n\n\n5 seat_heating\n\n\nlibrary(dplyr)\n\n#&gt; \n#&gt; Attaching package: 'dplyr'\n\n\n#&gt; The following objects are masked from 'package:stats':\n#&gt; \n#&gt;     filter, lag\n\n\n#&gt; The following objects are masked from 'package:base':\n#&gt; \n#&gt;     intersect, setdiff, setequal, union\n\ncar_prices &lt;- mutate(car_prices, seat_heating = TRUE)\n\nlm_model_seat_heating &lt;- lm(price ~ . + seat_heating, data = car_prices)\n\n\nSummary of the new model to see the coefficient of ‘seat_heating’\n\n\nsummary(lm_model_seat_heating)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = price ~ . + seat_heating, data = car_prices)\n#&gt; \n#&gt; Residuals:\n#&gt;    Min     1Q Median     3Q    Max \n#&gt;  -5662  -1120      0    798   9040 \n#&gt; \n#&gt; Coefficients: (1 not defined because of singularities)\n#&gt;                        Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)          -36269.965  15460.866  -2.346 0.020354 *  \n#&gt; aspirationturbo        1846.206   1041.391   1.773 0.078386 .  \n#&gt; doornumbertwo           242.523    571.929   0.424 0.672172    \n#&gt; carbodyhardtop        -3691.743   1424.825  -2.591 0.010561 *  \n#&gt; carbodyhatchback      -3344.335   1238.359  -2.701 0.007757 ** \n#&gt; carbodysedan          -2292.820   1356.014  -1.691 0.093043 .  \n#&gt; carbodywagon          -3427.921   1490.285  -2.300 0.022885 *  \n#&gt; drivewheelfwd          -504.564   1076.623  -0.469 0.640030    \n#&gt; drivewheelrwd           -15.446   1268.070  -0.012 0.990299    \n#&gt; enginelocationrear     6643.492   2572.275   2.583 0.010806 *  \n#&gt; wheelbase               -30.197     92.776  -0.325 0.745294    \n#&gt; carlength               -29.740     51.672  -0.576 0.565824    \n#&gt; carwidth                731.819    244.533   2.993 0.003258 ** \n#&gt; carheight               123.195    134.607   0.915 0.361617    \n#&gt; curbweight                2.612      1.781   1.467 0.144706    \n#&gt; enginetypedohcv       -8541.957   4749.685  -1.798 0.074219 .  \n#&gt; enginetypel             978.748   1786.384   0.548 0.584619    \n#&gt; enginetypeohc          3345.252    933.001   3.585 0.000461 ***\n#&gt; enginetypeohcf          972.919   1625.631   0.598 0.550462    \n#&gt; enginetypeohcv        -6222.322   1236.415  -5.033 1.43e-06 ***\n#&gt; cylindernumberfive   -11724.540   3019.192  -3.883 0.000157 ***\n#&gt; cylindernumberfour   -11549.326   3177.177  -3.635 0.000387 ***\n#&gt; cylindernumbersix     -7151.398   2247.230  -3.182 0.001793 ** \n#&gt; cylindernumberthree   -4318.929   4688.833  -0.921 0.358545    \n#&gt; cylindernumbertwelve -11122.209   4196.494  -2.650 0.008946 ** \n#&gt; enginesize              125.934     26.541   4.745 5.00e-06 ***\n#&gt; fuelsystem2bbl          177.136    883.615   0.200 0.841400    \n#&gt; fuelsystemmfi         -3041.018   2576.996  -1.180 0.239934    \n#&gt; fuelsystemmpfi          359.278   1001.529   0.359 0.720326    \n#&gt; fuelsystemspdi        -2543.890   1363.546  -1.866 0.064140 .  \n#&gt; fuelsystemspfi          514.766   2499.229   0.206 0.837107    \n#&gt; boreratio             -1306.740   1642.221  -0.796 0.427516    \n#&gt; stroke                -4527.137    922.732  -4.906 2.49e-06 ***\n#&gt; compressionratio       -737.901    555.960  -1.327 0.186539    \n#&gt; horsepower               10.293     22.709   0.453 0.651035    \n#&gt; peakrpm                   2.526      0.634   3.983 0.000108 ***\n#&gt; citympg                 -90.352    166.647  -0.542 0.588538    \n#&gt; highwaympg              154.858    167.148   0.926 0.355761    \n#&gt; seat_heatingTRUE             NA         NA      NA       NA    \n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 2189 on 143 degrees of freedom\n#&gt; Multiple R-squared:  0.9415, Adjusted R-squared:  0.9264 \n#&gt; F-statistic: 62.21 on 37 and 143 DF,  p-value: &lt; 2.2e-16\n\n\nFrom the table, we notice that the seat_heating has no impact on the price as the regressor model is unable to find any correlation between the price and seat_heating. Thats why the coefficient is NA. This could be due to the Perfect Multi-Collinearity. As the variable seat_heating is set to True and has no variation, the model cannot estimate a coefficient for it."
  },
  {
    "objectID": "content/01_journal/10_rdd.html",
    "href": "content/01_journal/10_rdd.html",
    "title": "Regression Discontinuity",
    "section": "",
    "text": "Note\n\n\n\nYou can delete everything in here and start fresh."
  },
  {
    "objectID": "content/01_journal/01_probability.html#define-the-probabilities-from-the-probability-tree",
    "href": "content/01_journal/01_probability.html#define-the-probabilities-from-the-probability-tree",
    "title": "Probability Theory",
    "section": "",
    "text": "P_S &lt;- 0.3 # Probability of a change in scope P_no_S &lt;- 0.7 # Probability of no change in scope P_T_given_S &lt;- 0.2 # Probability of being on time given a change in scope P_T_given_no_S &lt;- 0.6 # Probability of being on time given no change in scope\n\n\n\n\n\n\nNote\n\n\n\nYou can delete everything in here and start fresh REALLY.\n\n\nThis is a .qmd file. It is plain text with special features. Any time you write just like this, it will be compiled to normal text in the website. If you put a # in front of your text, it will create a top level-header.\nTo learn more about Quarto websites visit https://quarto.org/docs/websites."
  },
  {
    "objectID": "content/01_journal/03_regression.html#explain-what-data-type-it-is-and-what-values-it-can-take-on",
    "href": "content/01_journal/03_regression.html#explain-what-data-type-it-is-and-what-values-it-can-take-on",
    "title": "Regression and Statistical Inference",
    "section": "4.1 Explain what data type it is and what values it can take on",
    "text": "4.1 Explain what data type it is and what values it can take on\nI would like to choose the Engine Size as the Regressor.\n\nData type: As we see from the summary of the linear regression, the data type of the Engine Size is num or a numeric value.\nStatistical Significance: The p-value is 5.00e-06. It seems to be significantly smaller than the 0.05, indicating that the effect it has on the Price is quite high."
  },
  {
    "objectID": "content/01_journal/05_dag.html#regress-satisfaction-on-follow_ups",
    "href": "content/01_journal/05_dag.html#regress-satisfaction-on-follow_ups",
    "title": "Directed Acyclic Graphs",
    "section": "2.1 regress satisfaction on follow_ups",
    "text": "2.1 regress satisfaction on follow_ups\n\nRun a linear regression on the customer_sat\n\n\nlm_model &lt;- lm(satisfaction ~ follow_ups, data = customer_sat)\n\nsummary(lm_model)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = satisfaction ~ follow_ups, data = customer_sat)\n#&gt; \n#&gt; Residuals:\n#&gt;     Min      1Q  Median      3Q     Max \n#&gt; -12.412  -5.257   1.733   4.506  12.588 \n#&gt; \n#&gt; Coefficients:\n#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)  78.8860     4.2717  18.467 1.04e-10 ***\n#&gt; follow_ups   -3.3093     0.6618  -5.001 0.000243 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 7.923 on 13 degrees of freedom\n#&gt; Multiple R-squared:  0.658,  Adjusted R-squared:  0.6316 \n#&gt; F-statistic: 25.01 on 1 and 13 DF,  p-value: 0.0002427"
  },
  {
    "objectID": "content/01_journal/05_dag.html#regress-satisfaction-on-follow_ups-and-account-for-subscription",
    "href": "content/01_journal/05_dag.html#regress-satisfaction-on-follow_ups-and-account-for-subscription",
    "title": "Directed Acyclic Graphs",
    "section": "2.2 regress satisfaction on follow_ups and account for subscription",
    "text": "2.2 regress satisfaction on follow_ups and account for subscription\n\ncustomer_sat$subscription &lt;- as.factor(customer_sat$subscription)\nlm_model_subscription &lt;- lm(satisfaction ~ follow_ups + subscription, data = customer_sat)\n\nsummary(lm_model_subscription)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = satisfaction ~ follow_ups + subscription, data = customer_sat)\n#&gt; \n#&gt; Residuals:\n#&gt;     Min      1Q  Median      3Q     Max \n#&gt; -4.3222 -2.1972  0.3167  2.2667  3.9944 \n#&gt; \n#&gt; Coefficients:\n#&gt;                      Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)           26.7667     6.6804   4.007  0.00206 ** \n#&gt; follow_ups             2.1944     0.7795   2.815  0.01682 *  \n#&gt; subscriptionPremium   44.7222     5.6213   7.956 6.88e-06 ***\n#&gt; subscriptionPremium+  18.0722     2.1659   8.344 4.37e-06 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 2.958 on 11 degrees of freedom\n#&gt; Multiple R-squared:  0.9597, Adjusted R-squared:  0.9487 \n#&gt; F-statistic: 87.21 on 3 and 11 DF,  p-value: 5.956e-08"
  },
  {
    "objectID": "content/01_journal/06_rct.html#load-the-data-frame",
    "href": "content/01_journal/06_rct.html#load-the-data-frame",
    "title": "Randomized Controlled Trials",
    "section": "",
    "text": "abtest_data  &lt;- readRDS(\"../../data/abtest_online.rds\")\n\n\nhead(abtest_data)\n\n\n\n  \n\n\n\n\nPlotting the abtest data to check the balance\n\n\nlibrary(ggplot2)\n\ncompare_purchase &lt;- \n  ggplot(abtest_data, aes(x = as.factor(chatbot), y = purchase, color = as.factor(chatbot))) +\n  stat_summary(geom = \"errorbar\", \n               width = .5,\n               fun.data = \"mean_se\", \n               fun.args = list(mult=1.96),\n               show.legend = FALSE) +\n  labs(x = NULL, y = \"Purchase\", title = \"Difference in purchase\")\n\n\ncompare_purchase_amount &lt;- \n  ggplot(abtest_data, aes(x = as.factor(chatbot), y = purchase_amount, color = as.factor(chatbot))) +\n  stat_summary(geom = \"errorbar\", \n               width = .5,\n               fun.data = \"mean_se\", \n               fun.args = list(mult=1.96),\n               show.legend = FALSE) +\n  labs(x = NULL, y = \"Purchase Amount\", title = \"Difference in purchase amount\")\n\n\nPlot for purchase\n\n\ncompare_purchase\n\n\n\n\n\n\n\n\n\nPlot for purchase amount\n\n\ncompare_purchase_amount"
  },
  {
    "objectID": "content/01_journal/06_rct.html#run-a-regression-to-find-the-effect-of-chatbot-on-sales.",
    "href": "content/01_journal/06_rct.html#run-a-regression-to-find-the-effect-of-chatbot-on-sales.",
    "title": "Randomized Controlled Trials",
    "section": "",
    "text": "lm_fit &lt;- lm(purchase_amount ~ chatbot + previous_visit + mobile_device, data=abtest_data)\nsummary(lm_fit)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = purchase_amount ~ chatbot + previous_visit + mobile_device, \n#&gt;     data = abtest_data)\n#&gt; \n#&gt; Residuals:\n#&gt;     Min      1Q  Median      3Q     Max \n#&gt; -25.414 -14.428  -8.435  12.559  64.584 \n#&gt; \n#&gt; Coefficients:\n#&gt;                   Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)        15.2840     1.1227  13.614  &lt; 2e-16 ***\n#&gt; chatbotTRUE        -6.8488     1.1792  -5.808 8.49e-09 ***\n#&gt; previous_visit      0.7792     0.2869   2.716  0.00673 ** \n#&gt; mobile_deviceTRUE  -0.8562     1.2642  -0.677  0.49841    \n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 18.6 on 996 degrees of freedom\n#&gt; Multiple R-squared:  0.04243,    Adjusted R-squared:  0.03954 \n#&gt; F-statistic: 14.71 on 3 and 996 DF,  p-value: 2.228e-09\n\n\n\nThe chatbot variable seems to be having a negative impact on purchase amount with an estimate of -6.8488. This implies that the chatbot presence has decreased the sales and thereby reducing the purchase amount."
  },
  {
    "objectID": "content/01_journal/06_rct.html#find-subgroup-specific-effects-by-including-an-interaction.-compute-a-cate-for-one-exemplary-group.-a-subgroup-could-be-for-example-mobile-users.",
    "href": "content/01_journal/06_rct.html#find-subgroup-specific-effects-by-including-an-interaction.-compute-a-cate-for-one-exemplary-group.-a-subgroup-could-be-for-example-mobile-users.",
    "title": "Randomized Controlled Trials",
    "section": "",
    "text": "lm_cate &lt;- lm(purchase_amount ~ chatbot * mobile_device + previous_visit, data=abtest_data)\nsummary(lm_cate)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = purchase_amount ~ chatbot * mobile_device + previous_visit, \n#&gt;     data = abtest_data)\n#&gt; \n#&gt; Residuals:\n#&gt;     Min      1Q  Median      3Q     Max \n#&gt; -25.403 -14.450  -8.445  12.549  64.562 \n#&gt; \n#&gt; Coefficients:\n#&gt;                               Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)                   15.27384    1.19130  12.821  &lt; 2e-16 ***\n#&gt; chatbotTRUE                   -6.82837    1.42580  -4.789 1.93e-06 ***\n#&gt; mobile_deviceTRUE             -0.82375    1.79309  -0.459  0.64605    \n#&gt; previous_visit                 0.77914    0.28711   2.714  0.00677 ** \n#&gt; chatbotTRUE:mobile_deviceTRUE -0.06455    2.52907  -0.026  0.97964    \n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 18.6 on 995 degrees of freedom\n#&gt; Multiple R-squared:  0.04243,    Adjusted R-squared:  0.03858 \n#&gt; F-statistic: 11.02 on 4 and 995 DF,  p-value: 9.485e-09"
  },
  {
    "objectID": "content/01_journal/06_rct.html#binomial-outcome",
    "href": "content/01_journal/06_rct.html#binomial-outcome",
    "title": "Randomized Controlled Trials",
    "section": "",
    "text": "glm_fit &lt;- glm(purchase ~ chatbot + previous_visit + mobile_device, family=binomial, data=abtest_data)\nsummary(glm_fit)\n\n#&gt; \n#&gt; Call:\n#&gt; glm(formula = purchase ~ chatbot + previous_visit + mobile_device, \n#&gt;     family = binomial, data = abtest_data)\n#&gt; \n#&gt; Coefficients:\n#&gt;                   Estimate Std. Error z value Pr(&gt;|z|)    \n#&gt; (Intercept)       -0.22185    0.12347  -1.797  0.07237 .  \n#&gt; chatbotTRUE       -0.96894    0.13564  -7.144 9.09e-13 ***\n#&gt; previous_visit     0.10606    0.03262   3.252  0.00115 ** \n#&gt; mobile_deviceTRUE -0.07119    0.14530  -0.490  0.62417    \n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; (Dispersion parameter for binomial family taken to be 1)\n#&gt; \n#&gt;     Null deviance: 1329.1  on 999  degrees of freedom\n#&gt; Residual deviance: 1262.2  on 996  degrees of freedom\n#&gt; AIC: 1270.2\n#&gt; \n#&gt; Number of Fisher Scoring iterations: 4\n\n\n\nThe estimated values from the logistic regression might not be as straightforward as linear regression, because the coefficients represent the change in logarithmic odds of the outcome for a unit change in the predictor variable."
  },
  {
    "objectID": "content/01_journal/07_matching.html#load-the-data-frame",
    "href": "content/01_journal/07_matching.html#load-the-data-frame",
    "title": "Matching and Subclassification",
    "section": "",
    "text": "membership  &lt;- readRDS(\"../../data/membership.rds\")\n\n\nhead(membership)"
  },
  {
    "objectID": "content/01_journal/07_matching.html#dag-diagram",
    "href": "content/01_journal/07_matching.html#dag-diagram",
    "title": "Matching and Subclassification",
    "section": "",
    "text": "# Assuming you have the ggdag package installed\nlibrary(ggdag)\nlibrary(ggplot2)\n\n# Define the DAG\ndag &lt;- dagify(\n  X ~ Z,\n  Y ~ Z,\n  Y ~ X,\n  coords = list(x = c(Y = 3, Z = 2, X = 1),\n                y = c(Y = 0, Z = 1, X = 0)),\n  labels = list(X = \"card\",\n                Y = \"avg_purch\",\n                Z = \"pre_avg_purch\")\n)\n\nggdag(dag) +\n  theme_dag() + \n  geom_dag_point() +\n  geom_dag_text() +\n  geom_dag_edges() +\n  geom_dag_label_repel(aes(label = label))"
  },
  {
    "objectID": "content/01_journal/07_matching.html#visualize-the-data",
    "href": "content/01_journal/07_matching.html#visualize-the-data",
    "title": "Matching and Subclassification",
    "section": "",
    "text": "library(ggplot2)\n\n# Scatter plot for age vs. avg_purch\nggplot(membership, aes(x = card, y = avg_purch)) + geom_point()\n\n\n\n\n\n\n\n# Box plot for sex vs. avg_purch\nggplot(membership, aes(x = sex, y = avg_purch)) + geom_boxplot()\n\n#&gt; Warning: Continuous x aesthetic\n#&gt; ℹ did you forget `aes(group = ...)`?"
  },
  {
    "objectID": "content/01_journal/07_matching.html#compute-naive-estimate-of-ate",
    "href": "content/01_journal/07_matching.html#compute-naive-estimate-of-ate",
    "title": "Matching and Subclassification",
    "section": "",
    "text": "naive_model &lt;- lm(avg_purch ~ card + age + sex + pre_avg_purch, data = membership)\nsummary(naive_model)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = avg_purch ~ card + age + sex + pre_avg_purch, data = membership)\n#&gt; \n#&gt; Residuals:\n#&gt;     Min      1Q  Median      3Q     Max \n#&gt; -54.184 -10.206   0.022  10.003  62.115 \n#&gt; \n#&gt; Coefficients:\n#&gt;                Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)   -0.173970   0.542953  -0.320    0.749    \n#&gt; card          14.910946   0.314135  47.467   &lt;2e-16 ***\n#&gt; age            0.014427   0.013222   1.091    0.275    \n#&gt; sex            0.076991   0.304649   0.253    0.800    \n#&gt; pre_avg_purch  0.991921   0.006784 146.213   &lt;2e-16 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 15.23 on 9995 degrees of freedom\n#&gt; Multiple R-squared:  0.7817, Adjusted R-squared:  0.7816 \n#&gt; F-statistic:  8948 on 4 and 9995 DF,  p-value: &lt; 2.2e-16"
  },
  {
    "objectID": "content/01_journal/07_matching.html#apply-coarsed-matching-method",
    "href": "content/01_journal/07_matching.html#apply-coarsed-matching-method",
    "title": "Matching and Subclassification",
    "section": "",
    "text": "library(MatchIt)\nmatch_cem &lt;- matchit(card ~ sex + age + pre_avg_purch, data = membership, method = \"cem\")\nsummary(match_cem)\n\n#&gt; \n#&gt; Call:\n#&gt; matchit(formula = card ~ sex + age + pre_avg_purch, data = membership, \n#&gt;     method = \"cem\")\n#&gt; \n#&gt; Summary of Balance for All Data:\n#&gt;               Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean\n#&gt; sex                  0.5087        0.5002          0.0171          .    0.0086\n#&gt; age                 42.0331       39.1574          0.2064     1.1524    0.0438\n#&gt; pre_avg_purch       76.3938       66.0438          0.3936     1.0276    0.1092\n#&gt;               eCDF Max\n#&gt; sex             0.0086\n#&gt; age             0.0864\n#&gt; pre_avg_purch   0.1545\n#&gt; \n#&gt; Summary of Balance for Matched Data:\n#&gt;               Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean\n#&gt; sex                  0.5070        0.5070          0.0000          .    0.0000\n#&gt; age                 41.6786       41.6527          0.0019     0.9995    0.0016\n#&gt; pre_avg_purch       75.7076       75.3560          0.0134     0.9951    0.0042\n#&gt;               eCDF Max Std. Pair Dist.\n#&gt; sex             0.0000          0.0000\n#&gt; age             0.0070          0.1181\n#&gt; pre_avg_purch   0.0128          0.1547\n#&gt; \n#&gt; Sample Sizes:\n#&gt;               Control Treated\n#&gt; All            5768.     4232\n#&gt; Matched (ESS)  4407.4    4164\n#&gt; Matched        5716.     4164\n#&gt; Unmatched        52.       68\n#&gt; Discarded         0.        0\n\ndata_cem &lt;- match.data(match_cem)\nsummary(data_cem)\n\n#&gt;       age             sex        pre_avg_purch          card       \n#&gt;  Min.   :16.00   Min.   :0.000   Min.   : -1.791   Min.   :0.0000  \n#&gt;  1st Qu.:29.80   1st Qu.:0.000   1st Qu.: 51.859   1st Qu.:0.0000  \n#&gt;  Median :38.60   Median :1.000   Median : 69.983   Median :0.0000  \n#&gt;  Mean   :40.17   Mean   :0.504   Mean   : 70.242   Mean   :0.4215  \n#&gt;  3rd Qu.:48.90   3rd Qu.:1.000   3rd Qu.: 88.375   3rd Qu.:1.0000  \n#&gt;  Max.   :84.60   Max.   :1.000   Max.   :153.713   Max.   :1.0000  \n#&gt;                                                                    \n#&gt;    avg_purch         weights           subclass   \n#&gt;  Min.   :-28.61   Min.   : 0.1615   5      : 148  \n#&gt;  1st Qu.: 54.08   1st Qu.: 0.8527   94     : 142  \n#&gt;  Median : 76.11   Median : 1.0000   4      : 141  \n#&gt;  Mean   : 76.39   Mean   : 1.0000   80     : 140  \n#&gt;  3rd Qu.: 98.06   3rd Qu.: 1.0000   54     : 136  \n#&gt;  Max.   :192.91   Max.   :10.9817   29     : 135  \n#&gt;                                     (Other):9038\n\nmodel_cem &lt;- lm(avg_purch ~ card, data = data_cem)\nsummary(model_cem)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = avg_purch ~ card, data = data_cem)\n#&gt; \n#&gt; Residuals:\n#&gt;      Min       1Q   Median       3Q      Max \n#&gt; -100.835  -20.456   -0.178   20.041  119.973 \n#&gt; \n#&gt; Coefficients:\n#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)  66.1326     0.3934  168.11   &lt;2e-16 ***\n#&gt; card         24.3461     0.6060   40.18   &lt;2e-16 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 29.74 on 9878 degrees of freedom\n#&gt; Multiple R-squared:  0.1405, Adjusted R-squared:  0.1404 \n#&gt; F-statistic:  1614 on 1 and 9878 DF,  p-value: &lt; 2.2e-16"
  },
  {
    "objectID": "content/01_journal/07_matching.html#apply-coarsed-matching-method-with-curpoints",
    "href": "content/01_journal/07_matching.html#apply-coarsed-matching-method-with-curpoints",
    "title": "Matching and Subclassification",
    "section": "",
    "text": "library(MatchIt)\ncutpoints &lt;- list(age = seq(16, 85, 10), \n                  pre_avg_purch = seq(0, 160, 20))\nmatch_cem &lt;- matchit(card ~ sex + age + pre_avg_purch, data = membership, method = \"cem\", cutpoints = cutpoints)\nsummary(match_cem)\n\n#&gt; \n#&gt; Call:\n#&gt; matchit(formula = card ~ sex + age + pre_avg_purch, data = membership, \n#&gt;     method = \"cem\", cutpoints = cutpoints)\n#&gt; \n#&gt; Summary of Balance for All Data:\n#&gt;               Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean\n#&gt; sex                  0.5087        0.5002          0.0171          .    0.0086\n#&gt; age                 42.0331       39.1574          0.2064     1.1524    0.0438\n#&gt; pre_avg_purch       76.3938       66.0438          0.3936     1.0276    0.1092\n#&gt;               eCDF Max\n#&gt; sex             0.0086\n#&gt; age             0.0864\n#&gt; pre_avg_purch   0.1545\n#&gt; \n#&gt; Summary of Balance for Matched Data:\n#&gt;               Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean\n#&gt; sex                  0.5095        0.5095          0.0000          .    0.0000\n#&gt; age                 41.9593       41.8825          0.0055     1.0203    0.0024\n#&gt; pre_avg_purch       76.1990       75.5617          0.0242     1.0038    0.0064\n#&gt;               eCDF Max Std. Pair Dist.\n#&gt; sex             0.0000          0.0000\n#&gt; age             0.0092          0.2317\n#&gt; pre_avg_purch   0.0185          0.2486\n#&gt; \n#&gt; Sample Sizes:\n#&gt;               Control Treated\n#&gt; All           5768.      4232\n#&gt; Matched (ESS) 4704.04    4214\n#&gt; Matched       5750.      4214\n#&gt; Unmatched       18.        18\n#&gt; Discarded        0.         0\n\ndata_cem &lt;- match.data(match_cem)\nsummary(data_cem)\n\n#&gt;       age             sex         pre_avg_purch           card       \n#&gt;  Min.   :16.00   Min.   :0.0000   Min.   :  0.3307   Min.   :0.0000  \n#&gt;  1st Qu.:29.80   1st Qu.:0.0000   1st Qu.: 51.8799   1st Qu.:0.0000  \n#&gt;  Median :38.70   Median :1.0000   Median : 70.1684   Median :0.0000  \n#&gt;  Mean   :40.34   Mean   :0.5036   Mean   : 70.4465   Mean   :0.4229  \n#&gt;  3rd Qu.:49.10   3rd Qu.:1.0000   3rd Qu.: 88.6960   3rd Qu.:1.0000  \n#&gt;  Max.   :90.00   Max.   :1.0000   Max.   :158.5457   Max.   :1.0000  \n#&gt;                                                                      \n#&gt;    avg_purch         weights          subclass   \n#&gt;  Min.   :-28.61   Min.   :0.1516   9      : 422  \n#&gt;  1st Qu.: 54.11   1st Qu.:0.8676   2      : 419  \n#&gt;  Median : 76.27   Median :1.0000   1      : 415  \n#&gt;  Mean   : 76.64   Mean   :1.0000   4      : 407  \n#&gt;  3rd Qu.: 98.47   3rd Qu.:1.0000   32     : 405  \n#&gt;  Max.   :192.91   Max.   :6.1402   45     : 392  \n#&gt;                                    (Other):7504\n\nmodel_cem &lt;- lm(avg_purch ~ card, data = data_cem)\nsummary(model_cem)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = avg_purch ~ card, data = data_cem)\n#&gt; \n#&gt; Residuals:\n#&gt;      Min       1Q   Median       3Q      Max \n#&gt; -101.330  -20.623   -0.241   20.317  119.975 \n#&gt; \n#&gt; Coefficients:\n#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)  66.1307     0.3946  167.58   &lt;2e-16 ***\n#&gt; card         24.8434     0.6068   40.94   &lt;2e-16 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 29.92 on 9962 degrees of freedom\n#&gt; Multiple R-squared:  0.144,  Adjusted R-squared:  0.1439 \n#&gt; F-statistic:  1676 on 1 and 9962 DF,  p-value: &lt; 2.2e-16\n\n\n\nAdding cutpoints, did not seem to make much difference to the balance between the treatment and the control group indicating the treatment effect between the treatment and the control group. But this could also be due the the selection of the cutpoints. In this case, it was chosen to be age and pre_avg_purch might not have strong impact on the membership program."
  },
  {
    "objectID": "content/01_journal/07_matching.html#apply-nearest-neighbour-matching-method",
    "href": "content/01_journal/07_matching.html#apply-nearest-neighbour-matching-method",
    "title": "Matching and Subclassification",
    "section": "",
    "text": "match_nn &lt;- matchit(card ~ age + sex + pre_avg_purch, data = membership, method = \"nearest\", distance = \"mahalanobis\", replace = T)\nsummary(match_nn)\n\n#&gt; \n#&gt; Call:\n#&gt; matchit(formula = card ~ age + sex + pre_avg_purch, data = membership, \n#&gt;     method = \"nearest\", distance = \"mahalanobis\", replace = T)\n#&gt; \n#&gt; Summary of Balance for All Data:\n#&gt;               Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean\n#&gt; age                 42.0331       39.1574          0.2064     1.1524    0.0438\n#&gt; sex                  0.5087        0.5002          0.0171          .    0.0086\n#&gt; pre_avg_purch       76.3938       66.0438          0.3936     1.0276    0.1092\n#&gt;               eCDF Max\n#&gt; age             0.0864\n#&gt; sex             0.0086\n#&gt; pre_avg_purch   0.1545\n#&gt; \n#&gt; Summary of Balance for Matched Data:\n#&gt;               Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean\n#&gt; age                 42.0331       41.9964          0.0026     1.0171    0.0014\n#&gt; sex                  0.5087        0.5087          0.0000          .    0.0000\n#&gt; pre_avg_purch       76.3938       76.2937          0.0038     1.0178    0.0012\n#&gt;               eCDF Max Std. Pair Dist.\n#&gt; age             0.0061          0.0281\n#&gt; sex             0.0000          0.0000\n#&gt; pre_avg_purch   0.0076          0.0301\n#&gt; \n#&gt; Sample Sizes:\n#&gt;               Control Treated\n#&gt; All           5768.      4232\n#&gt; Matched (ESS) 1992.19    4232\n#&gt; Matched       2677.      4232\n#&gt; Unmatched     3091.         0\n#&gt; Discarded        0.         0\n\ndata_nn &lt;- match.data(match_nn)\nsummary(data_nn)\n\n#&gt;       age             sex         pre_avg_purch          card       \n#&gt;  Min.   :16.20   Min.   :0.0000   Min.   : -3.966   Min.   :0.0000  \n#&gt;  1st Qu.:30.80   1st Qu.:0.0000   1st Qu.: 56.368   1st Qu.:0.0000  \n#&gt;  Median :39.90   Median :1.0000   Median : 74.441   Median :1.0000  \n#&gt;  Mean   :41.51   Mean   :0.5086   Mean   : 74.705   Mean   :0.6125  \n#&gt;  3rd Qu.:50.60   3rd Qu.:1.0000   3rd Qu.: 92.900   3rd Qu.:1.0000  \n#&gt;  Max.   :90.00   Max.   :1.0000   Max.   :169.416   Max.   :1.0000  \n#&gt;    avg_purch         weights      \n#&gt;  Min.   :-23.40   Min.   :0.6326  \n#&gt;  1st Qu.: 62.22   1st Qu.:1.0000  \n#&gt;  Median : 83.73   Median :1.0000  \n#&gt;  Mean   : 83.79   Mean   :1.0000  \n#&gt;  3rd Qu.:105.06   3rd Qu.:1.0000  \n#&gt;  Max.   :192.91   Max.   :5.0605\n\nmodel_nn &lt;- lm(avg_purch ~ card, data = data_nn)\nsummary(model_nn)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = avg_purch ~ card, data = data_nn)\n#&gt; \n#&gt; Residuals:\n#&gt;      Min       1Q   Median       3Q      Max \n#&gt; -101.515  -20.666   -0.065   20.493  113.958 \n#&gt; \n#&gt; Coefficients:\n#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)  72.1472     0.5807  124.24   &lt;2e-16 ***\n#&gt; card         19.0120     0.7420   25.62   &lt;2e-16 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 30.05 on 6907 degrees of freedom\n#&gt; Multiple R-squared:  0.0868, Adjusted R-squared:  0.08667 \n#&gt; F-statistic: 656.5 on 1 and 6907 DF,  p-value: &lt; 2.2e-16"
  },
  {
    "objectID": "content/01_journal/07_matching.html#apply-inverse-probability-weightning-matching-method",
    "href": "content/01_journal/07_matching.html#apply-inverse-probability-weightning-matching-method",
    "title": "Matching and Subclassification",
    "section": "",
    "text": "propensity_model &lt;- glm(card ~ age + sex + pre_avg_purch, family = binomial(link = \"logit\"), data = membership)\nsummary(propensity_model)\n\n#&gt; \n#&gt; Call:\n#&gt; glm(formula = card ~ age + sex + pre_avg_purch, family = binomial(link = \"logit\"), \n#&gt;     data = membership)\n#&gt; \n#&gt; Coefficients:\n#&gt;                 Estimate Std. Error z value Pr(&gt;|z|)    \n#&gt; (Intercept)   -1.4298676  0.0752043 -19.013   &lt;2e-16 ***\n#&gt; age            0.0011486  0.0017761   0.647    0.518    \n#&gt; sex            0.0359388  0.0412622   0.871    0.384    \n#&gt; pre_avg_purch  0.0148262  0.0009264  16.003   &lt;2e-16 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; (Dispersion parameter for binomial family taken to be 1)\n#&gt; \n#&gt;     Null deviance: 13626  on 9999  degrees of freedom\n#&gt; Residual deviance: 13249  on 9996  degrees of freedom\n#&gt; AIC: 13257\n#&gt; \n#&gt; Number of Fisher Scoring iterations: 4\n\nmembership$propensity &lt;- predict(propensity_model, type = \"response\")\nsummary(membership$propensity)\n\n#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n#&gt;  0.1705  0.3534  0.4192  0.4232  0.4886  0.7695\n\nmembership$ipw &lt;- with(membership, (card / propensity) + ((1 - card) / (1 - propensity)))\nsummary(membership$ipw)\n\n#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n#&gt;   1.206   1.611   1.871   2.000   2.256   5.308\n\nmodel_ipw &lt;- lm(avg_purch ~ card, data = membership, weights = ipw)\nsummary(model_ipw)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = avg_purch ~ card, data = membership, weights = ipw)\n#&gt; \n#&gt; Weighted Residuals:\n#&gt;      Min       1Q   Median       3Q      Max \n#&gt; -205.353  -28.995   -0.275   28.787  214.307 \n#&gt; \n#&gt; Coefficients:\n#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)  70.2628     0.4320  162.66   &lt;2e-16 ***\n#&gt; card         14.9573     0.6109   24.48   &lt;2e-16 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 43.19 on 9998 degrees of freedom\n#&gt; Multiple R-squared:  0.05657,    Adjusted R-squared:  0.05647 \n#&gt; F-statistic: 599.5 on 1 and 9998 DF,  p-value: &lt; 2.2e-16"
  }
]