{
  "hash": "6c27cd8b60eb035008c3a419ca40f39a",
  "result": {
    "markdown": "---\ntitle: \"Difference-in-Differences\"\nauthor: \"Sriramkumar Sarida\"\n---\n\n\n# Study of New Admission procedure in hospitals\n\n------------------------------------------------------------------------\n\n## Load the data frame\n\n\n::: {.cell hash='08_did_cache/html/unnamed-chunk-1_a7ba60378936c093e4b47fb2a97ac068'}\n\n```{.r .cell-code}\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> \n#> Attaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> The following objects are masked from 'package:stats':\n#> \n#>     filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> The following objects are masked from 'package:base':\n#> \n#>     intersect, setdiff, setequal, union\n```\n:::\n\n```{.r .cell-code}\nhospital_data  <- readRDS(\"../../data/hospdd.rds\")\n```\n:::\n\n::: {.cell hash='08_did_cache/html/unnamed-chunk-2_a654b5ab7cc4d241ab89352125090363'}\n\n```{.r .cell-code}\nhead(hospital_data)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"hospital\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"frequency\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"month\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"procedure\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"satis\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1\",\"2\":\"3\",\"3\":\"7\",\"4\":\"1\",\"5\":\"4.106527\",\"_rn_\":\"1\"},{\"1\":\"1\",\"2\":\"2\",\"3\":\"3\",\"4\":\"0\",\"5\":\"3.319475\",\"_rn_\":\"2\"},{\"1\":\"1\",\"2\":\"4\",\"3\":\"2\",\"4\":\"0\",\"5\":\"3.411720\",\"_rn_\":\"3\"},{\"1\":\"1\",\"2\":\"2\",\"3\":\"4\",\"4\":\"1\",\"5\":\"3.004025\",\"_rn_\":\"4\"},{\"1\":\"1\",\"2\":\"1\",\"3\":\"3\",\"4\":\"0\",\"5\":\"3.110720\",\"_rn_\":\"5\"},{\"1\":\"1\",\"2\":\"1\",\"3\":\"7\",\"4\":\"1\",\"5\":\"2.882164\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n::: {.cell hash='08_did_cache/html/unnamed-chunk-3_2879ff3a10527582d25ef421cbdff693'}\n\n```{.r .cell-code}\nsummary(hospital_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#>     hospital       frequency         month         procedure     \n#>  Min.   : 1.00   Min.   :1.000   Min.   :1.000   Min.   :0.0000  \n#>  1st Qu.:11.00   1st Qu.:1.000   1st Qu.:1.750   1st Qu.:0.0000  \n#>  Median :23.00   Median :2.000   Median :3.500   Median :0.0000  \n#>  Mean   :22.84   Mean   :2.473   Mean   :3.625   Mean   :0.2079  \n#>  3rd Qu.:35.00   3rd Qu.:4.000   3rd Qu.:5.250   3rd Qu.:0.0000  \n#>  Max.   :46.00   Max.   :4.000   Max.   :7.000   Max.   :1.0000  \n#>      satis       \n#>  Min.   :0.5468  \n#>  1st Qu.:2.8888  \n#>  Median :3.4975  \n#>  Mean   :3.6191  \n#>  3rd Qu.:4.2405  \n#>  Max.   :9.7129\n```\n:::\n:::\n\n::: {.cell hash='08_did_cache/html/unnamed-chunk-4_595db43b26d968b528e4004821f016ab'}\n\n```{.r .cell-code}\ntreatment_by_month <- hospital_data %>%\n  group_by(month) %>%\n  summarise(treatment_count = sum(procedure))\n\n# Display the count of treatments by month\nprint(treatment_by_month)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> # A tibble: 7 Ã— 2\n#>   month treatment_count\n#>   <int>           <dbl>\n#> 1 1                   0\n#> 2 2                   0\n#> 3 3                   0\n#> 4 4                 383\n#> 5 5                 383\n#> 6 6                 383\n#> 7 7                 383\n```\n:::\n:::\n\n\n-   The exact period when the treatment came into effect is not explicitly shown in the question. To make a better estimate, the data was filtered based on the months to find the sum of the treatment values. So this calculation provides a hint when the new admission procedure was introduced. The treatment came into effect from month 4.\n\n\n\n::: {.cell hash='08_did_cache/html/unnamed-chunk-5_f10a99ef7cca630914101f31579a63d3'}\n\n```{.r .cell-code}\ntreatment_month = 4\n\nmean_control_before <- hospital_data %>%\n  filter(procedure == 0, month == treatment_month - 1) %>%\n  summarize(mean_satisfaction = mean(satis)) %>%\n  pull(mean_satisfaction)\n\nmean_treated_before <- hospital_data %>%\n  filter(procedure == 1, month == treatment_month - 1) %>%\n  summarize(mean_satisfaction = mean(satis)) %>%\n  pull(mean_satisfaction)\n\n\ndiff_before_treatment = mean_treated_before - mean_control_before\n\ndiff_before_treatment\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> [1] NaN\n```\n:::\n\n```{.r .cell-code}\nmean_control_after <- hospital_data %>%\n  filter(procedure == 0, month == treatment_month) %>%\n  summarize(mean_satisfaction = mean(satis)) %>%\n  pull(mean_satisfaction)\n\nmean_treated_after <- hospital_data %>%\n  filter(procedure == 1, month == treatment_month) %>%\n  summarize(mean_satisfaction = mean(satis)) %>%\n  pull(mean_satisfaction)\n\ndiff_after_treatment = mean_treated_after - mean_control_after\n\ndiff_after_treatment\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> [1] 0.9363077\n```\n:::\n:::\n\n::: {.cell hash='08_did_cache/html/unnamed-chunk-6_04db0d6c329818981e8f37784142245d'}\n\n```{.r .cell-code}\nhospital_data %>%\n  filter(procedure == 1, month < treatment_month) %>%\n  summarise(n = n())\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"n\"],\"name\":[1],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"0\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n::: {.cell hash='08_did_cache/html/unnamed-chunk-7_69d439b76d4c9760d92bfe39560d2b14'}\n\n```{.r .cell-code}\ndid_estimate <- diff_after_treatment - diff_before_treatment\n\ndid_estimate\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> [1] NaN\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}