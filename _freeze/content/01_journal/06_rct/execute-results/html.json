{
  "hash": "8ce0c2441bfa661c82a828ce7940a10b",
  "result": {
    "markdown": "---\ntitle: \"Randomized Controlled Trials\"\n---\n\n\n# Chatbot effect on E - Commerce Business\n\n------------------------------------------------------------------------\n\n## Load the data frame\n\n\n::: {.cell hash='06_rct_cache/html/unnamed-chunk-1_68bd61a305f7ba5674c2953408ab67e7'}\n\n```{.r .cell-code}\nabtest_data  <- readRDS(\"../../data/abtest_online.rds\")\n```\n:::\n\n::: {.cell hash='06_rct_cache/html/unnamed-chunk-2_683425d0a0944dd10d7c6c4fcf8ebeb6'}\n\n```{.r .cell-code}\nhead(abtest_data)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"ip\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"chatbot\"],\"name\":[2],\"type\":[\"lgl\"],\"align\":[\"right\"]},{\"label\":[\"previous_visit\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"mobile_device\"],\"name\":[4],\"type\":[\"lgl\"],\"align\":[\"right\"]},{\"label\":[\"purchase\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"purchase_amount\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"161.88.211.70\",\"2\":\"TRUE\",\"3\":\"0\",\"4\":\"FALSE\",\"5\":\"0\",\"6\":\"0.00000\",\"_rn_\":\"1\"},{\"1\":\"239.86.201.0\",\"2\":\"TRUE\",\"3\":\"1\",\"4\":\"FALSE\",\"5\":\"1\",\"6\":\"39.45626\",\"_rn_\":\"2\"},{\"1\":\"35.90.22.130\",\"2\":\"TRUE\",\"3\":\"1\",\"4\":\"FALSE\",\"5\":\"0\",\"6\":\"0.00000\",\"_rn_\":\"3\"},{\"1\":\"219.176.193.3\",\"2\":\"FALSE\",\"3\":\"4\",\"4\":\"TRUE\",\"5\":\"0\",\"6\":\"0.00000\",\"_rn_\":\"4\"},{\"1\":\"247.85.168.16\",\"2\":\"TRUE\",\"3\":\"1\",\"4\":\"FALSE\",\"5\":\"0\",\"6\":\"0.00000\",\"_rn_\":\"5\"},{\"1\":\"120.221.249.244\",\"2\":\"TRUE\",\"3\":\"2\",\"4\":\"FALSE\",\"5\":\"0\",\"6\":\"0.00000\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n> Plotting the abtest data to check the balance\n\n\n::: {.cell hash='06_rct_cache/html/unnamed-chunk-3_ea7c54df35a36111425d374602985123'}\n\n```{.r .cell-code}\nlibrary(ggplot2)\n\ncompare_purchase <- \n  ggplot(abtest_data, aes(x = as.factor(chatbot), y = purchase, color = as.factor(chatbot))) +\n  stat_summary(geom = \"errorbar\", \n               width = .5,\n               fun.data = \"mean_se\", \n               fun.args = list(mult=1.96),\n               show.legend = FALSE) +\n  labs(x = NULL, y = \"Purchase\", title = \"Difference in purchase\")\n\n\ncompare_purchase_amount <- \n  ggplot(abtest_data, aes(x = as.factor(chatbot), y = purchase_amount, color = as.factor(chatbot))) +\n  stat_summary(geom = \"errorbar\", \n               width = .5,\n               fun.data = \"mean_se\", \n               fun.args = list(mult=1.96),\n               show.legend = FALSE) +\n  labs(x = NULL, y = \"Purchase Amount\", title = \"Difference in purchase amount\")\n```\n:::\n\n\n> Plot for purchase\n\n\n::: {.cell hash='06_rct_cache/html/unnamed-chunk-4_584e4c83095b3f02af1b07a1a5b624e0'}\n\n```{.r .cell-code}\ncompare_purchase\n```\n\n::: {.cell-output-display}\n![](06_rct_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n> Plot for purchase amount\n\n\n::: {.cell hash='06_rct_cache/html/unnamed-chunk-5_28406d71519ba1c5c0ada5dc8e65b7d2'}\n\n```{.r .cell-code}\ncompare_purchase_amount\n```\n\n::: {.cell-output-display}\n![](06_rct_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n## Run a regression to find the effect of chatbot on sales.\n\n\n::: {.cell hash='06_rct_cache/html/unnamed-chunk-6_3e4cc23613694ffa738a192d3eb95014'}\n\n```{.r .cell-code}\nlm_fit <- lm(purchase_amount ~ chatbot + previous_visit + mobile_device, data=abtest_data)\nsummary(lm_fit)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = purchase_amount ~ chatbot + previous_visit + mobile_device, \n#>     data = abtest_data)\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -25.414 -14.428  -8.435  12.559  64.584 \n#> \n#> Coefficients:\n#>                   Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)        15.2840     1.1227  13.614  < 2e-16 ***\n#> chatbotTRUE        -6.8488     1.1792  -5.808 8.49e-09 ***\n#> previous_visit      0.7792     0.2869   2.716  0.00673 ** \n#> mobile_deviceTRUE  -0.8562     1.2642  -0.677  0.49841    \n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 18.6 on 996 degrees of freedom\n#> Multiple R-squared:  0.04243,\tAdjusted R-squared:  0.03954 \n#> F-statistic: 14.71 on 3 and 996 DF,  p-value: 2.228e-09\n```\n:::\n:::\n\n\n-   The **chatbot** variable seems to be having a negative impact on **purchase amount** with an estimate of -6.8488. This implies that the **chatbot** presence has decreased the sales and thereby reducing the **purchase amount**.\n\n## Find subgroup-specific effects by including an interaction. Compute a CATE for one exemplary group. A subgroup could be for example mobile users.\n\n\n::: {.cell hash='06_rct_cache/html/unnamed-chunk-7_7a32bc0ce7f95035e3051d7d197a9970'}\n\n```{.r .cell-code}\nlm_cate <- lm(purchase_amount ~ chatbot * mobile_device + previous_visit, data=abtest_data)\nsummary(lm_cate)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = purchase_amount ~ chatbot * mobile_device + previous_visit, \n#>     data = abtest_data)\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -25.403 -14.450  -8.445  12.549  64.562 \n#> \n#> Coefficients:\n#>                               Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)                   15.27384    1.19130  12.821  < 2e-16 ***\n#> chatbotTRUE                   -6.82837    1.42580  -4.789 1.93e-06 ***\n#> mobile_deviceTRUE             -0.82375    1.79309  -0.459  0.64605    \n#> previous_visit                 0.77914    0.28711   2.714  0.00677 ** \n#> chatbotTRUE:mobile_deviceTRUE -0.06455    2.52907  -0.026  0.97964    \n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 18.6 on 995 degrees of freedom\n#> Multiple R-squared:  0.04243,\tAdjusted R-squared:  0.03858 \n#> F-statistic: 11.02 on 4 and 995 DF,  p-value: 9.485e-09\n```\n:::\n:::\n\n\n## Binomial Outcome\n\n\n::: {.cell hash='06_rct_cache/html/unnamed-chunk-8_14f7bc193447b469ab6843248adda3f4'}\n\n```{.r .cell-code}\nglm_fit <- glm(purchase ~ chatbot + previous_visit + mobile_device, family=binomial, data=abtest_data)\nsummary(glm_fit)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> glm(formula = purchase ~ chatbot + previous_visit + mobile_device, \n#>     family = binomial, data = abtest_data)\n#> \n#> Coefficients:\n#>                   Estimate Std. Error z value Pr(>|z|)    \n#> (Intercept)       -0.22185    0.12347  -1.797  0.07237 .  \n#> chatbotTRUE       -0.96894    0.13564  -7.144 9.09e-13 ***\n#> previous_visit     0.10606    0.03262   3.252  0.00115 ** \n#> mobile_deviceTRUE -0.07119    0.14530  -0.490  0.62417    \n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> (Dispersion parameter for binomial family taken to be 1)\n#> \n#>     Null deviance: 1329.1  on 999  degrees of freedom\n#> Residual deviance: 1262.2  on 996  degrees of freedom\n#> AIC: 1270.2\n#> \n#> Number of Fisher Scoring iterations: 4\n```\n:::\n:::\n\n\n-   The estimated values from the logistic regression might not be as straightforward as linear regression, because the coefficients represent the change in logarithmic odds of the outcome for a unit change in the predictor variable.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}